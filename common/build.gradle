plugins {
	id 'com.gradleup.shadow' version '9.0.0-beta4'
	id 'maven-publish'
}

version = "${rootProject.mod_version}"

repositories {
	mavenCentral()
}

dependencies {
	// Netty
	api("io.netty:netty-codec-http:${project.netty_version}")
}

processResources {
	final Map properties = Map<String, String>.of(
			"modVersion",                 project.mod_version,
			"supportedMinecraftVersions", project.supported_minecraft_versions
	)

	inputs.properties(properties)

	filesMatching("fabric.mod.json") {
		expand(properties)
	}

	exclude ".cache/**"
}

//publishing {
//	repositories {
//		maven {
//			name = "OffsetMonkey538"
//			url = "https://maven.offsetmonkey538.top/releases"
//			credentials {
//				username = providers.gradleProperty("OffsetMonkey538Username").getOrElse(System.getenv("MAVEN_USERNAME"))
//				password = providers.gradleProperty("OffsetMonkey538Password").getOrElse(System.getenv("MAVEN_PASSWORD"))
//			}
//			authentication {
//				basic(BasicAuthentication)
//			}
//		}
//	}
//	publications {
//		maven(MavenPublication) {
//			artifactId = "mesh-lib"
//
//			from(components["java"])
//		}
//	}
//}
